1
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoMessager ä»¿çœŸæ•™å­¦æŒ‡å—</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', system-ui, sans-serif; }
        
        /* æ¨¡æ‹Ÿ Windows ç»å…¸å­—ä½“ */
        .win-font { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .win-mono { font-family: 'Consolas', 'Courier New', monospace; }

        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡ */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }

        /* æ¨¡æ‹Ÿ Windows æŒ‰é’®æŒ‰ä¸‹çš„æ•ˆæœ */
        .win-btn {
            background-color: #e1e1e1;
            border: 1px solid #adadad;
            border-radius: 2px;
            transition: all 0.1s;
        }
        .win-btn:hover { background-color: #e5f1fb; border-color: #0078d7; }
        .win-btn:active { background-color: #cce4f7; border-color: #005499; }
        
        /* å·¨å¤§çš„å¼€å…³æŒ‰é’®æ ·å¼ */
        .big-switch {
            background-color: #e1e1e1;
            border: 2px solid #0078d7; 
        }

        /* çŠ¶æ€ç¯ */
        .status-box {
            width: 100%;
            height: 100px;
            border: 1px solid #999;
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-200 h-screen overflow-hidden">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- æ ¸å¿ƒé€»è¾‘æ¨¡æ‹Ÿ (ä¿æŒä¸å˜) ---
        const mockEncrypt = (text) => {
            if (text.startsWith("DOFM=")) return text;
            const b64 = btoa(unescape(encodeURIComponent(text)));
            return `DOFM=136b0dc0=${b64.substring(0, 10)}\\${b64.substring(10)}!219M1`;
        };

        const partialEncrypt = (text) => {
            return text.replace(/\*<(.*?)>\*/g, (match, p1) => `*<${mockEncrypt(p1)}>*`);
        };

        const App = () => {
            // UI State
            const [activeSection, setActiveSection] = useState(0);
            const [consoleLogs, setConsoleLogs] = useState([]);
            const [isCryptoOn, setIsCryptoOn] = useState(false);
            const [statusColor, setStatusColor] = useState('#008000'); // Green
            const [virtualClipboard, setVirtualClipboard] = useState("");
            const [importValue, setImportValue] = useState("");
            
            // Console Scroll Ref
            const consoleEndRef = useRef(null);
            
            // Auto scroll console
            useEffect(() => {
                consoleEndRef.current?.scrollIntoView({ behavior: "smooth" });
            }, [consoleLogs]);

            const addLog = (msg) => {
                // æ¨¡æ‹Ÿç®€å•çš„ >> è¾“å‡ºæ ¼å¼
                setConsoleLogs(prev => [...prev, `>> ${msg}`]);
            };

            // Toggle Logic
            const toggleCrypto = () => {
                if (isCryptoOn) {
                    setIsCryptoOn(false);
                    setStatusColor('#008000'); // Green
                    addLog("Turned Crypto OFF!");
                } else {
                    setIsCryptoOn(true);
                    setStatusColor('#FF0000'); // Red
                    addLog("Turned Crypto ON!");
                }
            };

            // Copy Simulation Logic
            const handleSimulateCopy = (text) => {
                if (!isCryptoOn) {
                    setVirtualClipboard(text);
                    addLog("Clipboard update (Plain): " + text.substring(0, 20) + "...");
                    return;
                }

                setStatusColor('#FFFF00'); // Yellow (Busy)
                setTimeout(() => {
                    let result = text;
                    if (text.includes("*<") && text.includes(">*")) {
                        result = partialEncrypt(text);
                        addLog("Partial Encryption Complete.");
                    } else if (text.startsWith("====!!!!") || text.endsWith("====!!!!")) {
                        result = `"Enc_${Math.random().toString(16).substr(2, 8)}.denc.bin" 792KB`;
                        addLog("File Structure Encrypted.");
                    } else if (text.startsWith("DOFM=")) {
                         result = "Here is something I want to encrypt."; 
                         addLog("Decryption Complete.");
                    } else {
                        result = mockEncrypt(text);
                        addLog("Text Encrypted.");
                    }
                    
                    setVirtualClipboard(result);
                    setStatusColor('#FF0000'); // Back to Red
                }, 800);
            };

            // Button Actions
            const handleShareMe = () => {
                const choice = confirm("ä½¿ç”¨ Telepathy (P2P) å—ï¼Ÿ\nç‚¹å‡»ç¡®å®šè¿›å…¥ Telepathy æ¨¡å¼ï¼Œå–æ¶ˆåˆ™ç”Ÿæˆæœ¬åœ°ä»£ç ã€‚");
                if (!choice) {
                    const code = "SMS=User_" + Math.random().toString(36).substring(7);
                    addLog("Your SMS Code: " + code);
                    // è‡ªåŠ¨å¤åˆ¶åˆ°è™šæ‹Ÿå‰ªè´´æ¿æ–¹ä¾¿ç”¨æˆ·ç²˜è´´
                    setVirtualClipboard(code);
                } else {
                    addLog("Net Service Error! (Simulated)");
                }
            };

            const handleNewClient = () => {
                if (!importValue) return;
                addLog(`Client Added: ${importValue.substring(0,10)}...`);
                alert("New Client Successfully Added!");
                setImportValue("");
            };

            // --- æ•™ç¨‹ç« èŠ‚ ---
            const sections = [
                {
                    id: "intro",
                    title: "ğŸ‘‹ å¿«é€Ÿä¸Šæ‰‹ CryptoMessager",
                    content: (
                        <div className="space-y-4">
                            <p className="text-lg text-slate-300">è¿™æ˜¯åŸºäºçœŸå® UI çš„äº¤äº’å¼æ¨¡æ‹Ÿå™¨ã€‚å³ä¾§çš„ç•Œé¢å®Œå…¨å¤åˆ»äº† <span className="text-blue-400">CryptoMessager v0.0.1.3</span>ã€‚</p>
                            <div className="p-4 bg-blue-900/20 border-l-4 border-blue-500 text-slate-300 rounded">
                                <p>è¯·æ³¨æ„è§‚å¯Ÿå³ä¾§ UI çš„å˜åŒ–ï¼Œå®ƒçœŸå®æ¨¡æ‹Ÿäº†è½¯ä»¶çš„ååº”ã€‚</p>
                            </div>
                            <button onClick={() => setActiveSection(1)} className="mt-4 px-6 py-2 bg-blue-600 hover:bg-blue-500 rounded text-white transition">å¼€å§‹é…ç½® &rarr;</button>
                        </div>
                    )
                },
                {
                    id: "setup",
                    title: "1. èº«ä»½é…ç½® (Share Me)",
                    content: (
                        <div className="space-y-4">
                            <h3 className="text-xl font-bold text-white">æ·»åŠ è‡ªå·±çš„ SMS Code</h3>
                            <p className="text-slate-400 text-sm">è‹¥ä¸æ·»åŠ è‡ªå·±ï¼Œä½ å°†æ— æ³•è§£å¯†è‡ªå·±åŠ å¯†çš„å†…å®¹ã€‚</p>
                            
                            <div className="border border-slate-700 p-4 rounded bg-slate-800/50">
                                <h4 className="font-semibold text-green-400 mb-2">æ“ä½œæŒ‡å¼•ï¼š</h4>
                                <ol className="list-decimal list-inside space-y-2 text-sm text-slate-300">
                                    <li>åœ¨å³ä¾§è½¯ä»¶é¢æ¿ä¸­ï¼Œç‚¹å‡»å³ä¾§æŒ‰é’®æ çš„ç¬¬ä¸€é¡¹ <b className="text-white border border-slate-500 px-1 rounded">Share Me</b>ã€‚</li>
                                    <li>åœ¨å¼¹çª—ä¸­ç‚¹å‡» <b>å–æ¶ˆ (Cancel)</b> ä»¥ç”Ÿæˆæ™®é€šä»£ç ã€‚</li>
                                    <li>è§‚å¯Ÿä¸‹æ–¹ <span className="font-mono text-xs bg-black p-1">Console</span> ä¸­ç”Ÿæˆçš„ä»£ç ã€‚</li>
                                    <li>å°†ç”Ÿæˆçš„ä»£ç å¤åˆ¶ï¼ˆæœ¬æ¨¡æ‹Ÿå™¨å·²è‡ªåŠ¨å¤åˆ¶åˆ°ä¸‹æ–¹è™šæ‹Ÿå‰ªè´´æ¿ï¼‰ã€‚</li>
                                    <li>ç²˜è´´åˆ°é¡¶éƒ¨çš„ <b className="text-white">Import</b> è¾“å…¥æ¡†ä¸­ã€‚</li>
                                    <li>ç‚¹å‡»å³ä¸Šè§’çš„ <b className="text-white border border-slate-500 px-1 rounded">New Client</b>ã€‚</li>
                                </ol>
                            </div>
                        </div>
                    )
                },
                {
                    id: "encrypt",
                    title: "2. åŠ å¯†ä¸è§£å¯†",
                    content: (
                        <div className="space-y-4">
                            <h3 className="text-xl font-bold text-white">åˆ‡æ¢å·¥ä½œçŠ¶æ€</h3>
                            <p className="text-slate-400 text-sm">è½¯ä»¶æ ¸å¿ƒåŠŸèƒ½æ˜¯ä¸€ä¸ªå·¨å¤§çš„å¼€å…³ã€‚</p>
                            
                            <div className="border border-slate-700 p-4 rounded bg-slate-800/50">
                                <h4 className="font-semibold text-yellow-400 mb-2">å°è¯•åŠ å¯†ï¼š</h4>
                                <ol className="list-decimal list-inside space-y-2 text-sm text-slate-300">
                                    <li>ç‚¹å‡»ä¸­é—´å·¨å¤§çš„ <span className="text-2xl font-bold text-slate-400">OFF</span> æŒ‰é’®ã€‚</li>
                                    <li>è§‚å¯Ÿå³ä¾§ç»¿è‰²çš„æ–¹å—å˜æˆäº† <span className="text-red-500">çº¢è‰²</span>ï¼Œæ§åˆ¶å°æç¤º "Turned Crypto ON!"ã€‚</li>
                                    <li>åœ¨ä¸‹æ–¹æµ‹è¯•æ¡†è¾“å…¥ä»»æ„æ–‡å­—ï¼Œç‚¹å‡» <b>æ¨¡æ‹Ÿ Ctrl+C</b>ã€‚</li>
                                </ol>
                                
                                <div className="mt-4 flex gap-2">
                                    <input type="text" id="test-txt" className="flex-1 bg-slate-900 border border-slate-600 rounded px-2 text-sm" defaultValue="Hello World" />
                                    <button 
                                        onClick={() => handleSimulateCopy(document.getElementById('test-txt').value)}
                                        className="bg-slate-700 px-3 py-1 rounded text-sm hover:bg-slate-600"
                                    >
                                        æ¨¡æ‹Ÿ Ctrl+C
                                    </button>
                                </div>
                                <p className="text-xs text-slate-500 mt-2">è¯·è§‚å¯Ÿå³ä¸‹æ–¹â€œç³»ç»Ÿå‰ªè´´æ¿è§†å›¾â€çš„å˜åŒ–ã€‚</p>
                            </div>
                        </div>
                    )
                },
                {
                    id: "advanced",
                    title: "3. è¿›é˜¶åŠŸèƒ½",
                    content: (
                        <div className="space-y-4">
                            <h3 className="text-xl font-bold text-white">éƒ¨åˆ†åŠ å¯† & æ–‡ä»¶åŠ å¯†</h3>
                            
                            <div className="grid gap-4">
                                <div className="bg-slate-800 p-3 rounded border border-slate-700">
                                    <h5 className="font-bold text-blue-400 text-sm">éƒ¨åˆ†åŠ å¯†</h5>
                                    <p className="text-xs text-slate-400 mb-2">åªåŠ å¯†è¢« *&lt; &gt;* åŒ…è£¹çš„å†…å®¹ã€‚</p>
                                    <button onClick={() => handleSimulateCopy("å¯†ç æ˜¯ *<123456>*")} className="w-full text-left text-xs bg-slate-900 p-2 rounded hover:bg-slate-700 transition">
                                        ğŸ‘‰ ç‚¹å‡»å¤åˆ¶ï¼šå¯†ç æ˜¯ *&lt;123456&gt;*
                                    </button>
                                </div>
                                
                                <div className="bg-slate-800 p-3 rounded border border-slate-700">
                                    <h5 className="font-bold text-pink-400 text-sm">æ–‡æœ¬è½¬æ–‡ä»¶</h5>
                                    <p className="text-xs text-slate-400 mb-2">å¤„ç†è¶…é•¿æ–‡æœ¬ã€‚</p>
                                    <button onClick={() => handleSimulateCopy("====!!!!è¶…é•¿æ–‡æœ¬å†…å®¹...")} className="w-full text-left text-xs bg-slate-900 p-2 rounded hover:bg-slate-700 transition">
                                        ğŸ‘‰ ç‚¹å‡»å¤åˆ¶ï¼š====!!!!è¶…é•¿æ–‡æœ¬å†…å®¹...
                                    </button>
                                </div>
                            </div>
                        </div>
                    )
                }
            ];

            return (
                <div className="flex flex-col md:flex-row h-screen font-sans">
                    {/* --- å·¦ä¾§æ•™ç¨‹æ  (ç°ä»£æš—é»‘é£æ ¼) --- */}
                    <div className="flex-1 flex flex-col md:w-5/12 h-full bg-slate-900 border-r border-slate-800 overflow-y-auto">
                        <header className="p-6 border-b border-slate-800 bg-slate-900/90 backdrop-blur sticky top-0 z-10">
                            <h1 className="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-indigo-400">
                                CryptoMessager Guide
                            </h1>
                            <p className="text-xs text-slate-500 mt-1">Interactive Tutorial with Realistic GUI</p>
                        </header>

                        <div className="p-6 pb-32">
                            {/* å¯¼èˆª Tabs */}
                            <div className="flex space-x-2 mb-6 overflow-x-auto pb-2">
                                {sections.map((sec, idx) => (
                                    <button 
                                        key={idx}
                                        onClick={() => setActiveSection(idx)}
                                        className={`px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap transition-colors ${activeSection === idx ? 'bg-blue-600 text-white' : 'bg-slate-800 text-slate-400 hover:bg-slate-700'}`}
                                    >
                                        {sec.id.toUpperCase()}
                                    </button>
                                ))}
                            </div>

                            {/* å†…å®¹åŒº */}
                            <div className="animate-fade-in">
                                {sections[activeSection].content}
                            </div>

                            {/* åº•éƒ¨å¯¼èˆª */}
                            <div className="flex justify-between mt-8 pt-6 border-t border-slate-800">
                                <button disabled={activeSection === 0} onClick={() => setActiveSection(p => p - 1)} className="text-sm text-slate-400 hover:text-white disabled:opacity-30">&larr; ä¸Šä¸€æ­¥</button>
                                <button disabled={activeSection === sections.length - 1} onClick={() => setActiveSection(p => p + 1)} className="text-sm bg-blue-600 px-4 py-1.5 rounded hover:bg-blue-500 disabled:opacity-30 disabled:bg-slate-700">ä¸‹ä¸€æ­¥ &rarr;</button>
                            </div>
                        </div>
                    </div>

                    {/* --- å³ä¾§æ¨¡æ‹Ÿå™¨åŒºåŸŸ (ç°è‰²èƒŒæ™¯) --- */}
                    <div className="md:w-7/12 bg-[#202020] flex flex-col items-center justify-center p-4 md:p-10 relative overflow-hidden">
                        
                        {/* 1. çœŸå® GUI å®¹å™¨ (Windows çª—ä½“æ ·å¼) */}
                        <div className="bg-[#f0f0f0] w-full max-w-[650px] shadow-2xl rounded-sm border border-gray-400 win-font text-black select-none">
                            
                            {/* Title Bar */}
                            <div className="flex justify-between items-center px-3 py-2 bg-white border-b border-gray-300">
                                <div className="flex items-center gap-2">
                                    <div className="w-5 h-5 bg-blue-500 rounded-sm flex items-center justify-center text-white text-xs font-bold">ğŸ›¡ï¸</div>
                                    <span className="text-sm text-gray-700">CryptoMessager_GUI Version 0.0.1.3</span>
                                </div>
                                <div className="flex gap-4 text-gray-400 text-lg">
                                    <button className="hover:text-black">-</button>
                                    <button className="hover:text-black">â–¡</button>
                                    <button className="hover:text-red-500">Ã—</button>
                                </div>
                            </div>

                            {/* Main Body */}
                            <div className="p-4 space-y-3">
                                
                                {/* Row 1: Import */}
                                <div className="flex items-center gap-2 h-8">
                                    <label className="w-16 text-right font-serif text-lg">Import:</label>
                                    <input 
                                        type="text" 
                                        value={importValue}
                                        onChange={(e) => setImportValue(e.target.value)}
                                        className="flex-1 h-full border border-gray-400 px-1 text-sm bg-white placeholder-gray-400" 
                                        placeholder="Add a client by entering a SMS Code or Link Code here."
                                    />
                                    <button onClick={handleNewClient} className="win-btn w-28 h-full font-serif text-lg">New Client</button>
                                </div>

                                {/* Row 2: Delete */}
                                <div className="flex items-center gap-2 h-8">
                                    <label className="w-16 text-right font-serif text-lg">Delete:</label>
                                    <input type="text" disabled className="flex-1 h-full border border-gray-400 px-1 text-sm bg-white placeholder-gray-400" placeholder="Delete a client by entering a DEL Code here." />
                                    <button className="win-btn w-28 h-full font-serif text-lg">Del Client</button>
                                </div>

                                {/* Row 3: ON/OFF Big Button & Status */}
                                <div className="flex items-start gap-2 mt-2">
                                    <label className="w-16 text-right font-serif text-lg mt-2">ON/OFF:</label>
                                    
                                    {/* The Big Button */}
                                    <button 
                                        onClick={toggleCrypto}
                                        className="flex-1 h-24 big-switch text-5xl text-black relative active:top-[1px] font-sans"
                                    >
                                        {isCryptoOn ? 'ON' : 'OFF'}
                                    </button>

                                    {/* Status Area */}
                                    <div className="w-28 flex flex-col gap-1">
                                        <label className="font-serif text-lg">Status:</label>
                                        <div className="status-box" style={{ backgroundColor: statusColor }}></div>
                                    </div>
                                </div>

                                {/* Row 4: Console & Right Buttons */}
                                <div className="flex items-start gap-2 mt-2 h-64">
                                    <label className="w-16 text-right font-serif text-lg">Console:</label>
                                    
                                    {/* Console Output */}
                                    <div className="flex-1 h-full border-2 border-gray-400 bg-white p-1 overflow-y-auto win-mono text-sm leading-tight">
                                        <div className="font-bold">[Â© DOF Studio/NathMath 2024]</div>
                                        <div className="font-bold">[Version 0.0.1.3 (Built 240721)]</div>
                                        <div className="font-bold mb-2">[Released on github.com/dof-studio/CryptoMessager]</div>
                                        {consoleLogs.map((log, i) => (
                                            <div key={i}>{log}</div>
                                        ))}
                                        <div ref={consoleEndRef}></div>
                                    </div>

                                    {/* Right Side Button Stack */}
                                    <div className="w-28 flex flex-col gap-2">
                                        <button onClick={handleShareMe} className="win-btn h-8 font-serif text-lg">Share Me</button>
                                        <button className="win-btn h-8 font-serif text-lg">Delete Me</button>
                                        <button className="win-btn h-8 font-serif text-lg">Directly</button>
                                        <button className="win-btn h-8 font-serif text-lg">Ret Info</button>
                                        <div className="h-2"></div> {/* Spacer */}
                                        <button className="win-btn h-8 font-serif text-lg">View Log</button>
                                        <button className="win-btn h-8 font-serif text-lg">Clear Log</button>
                                        <button onClick={() => setConsoleLogs([])} className="win-btn h-8 font-serif text-lg">Clr Consol</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* 2. è™šæ‹Ÿå‰ªè´´æ¿ç›‘æ§ (è¾…åŠ©å·¥å…·) */}
                        <div className="w-full max-w-[650px] mt-6 bg-black rounded-lg border border-slate-700 p-4 shadow-xl">
                            <div className="flex justify-between items-center mb-2">
                                <span className="text-xs font-mono text-green-400">
                                    <i className="ri-clipboard-line mr-1"></i>SYSTEM CLIPBOARD MONITOR
                                </span>
                                <span className="text-[10px] text-slate-500">ï¼ˆæ­¤å¤„æ¨¡æ‹Ÿç³»ç»Ÿå‰ªè´´æ¿å†…å®¹ï¼‰</span>
                            </div>
                            <textarea 
                                readOnly
                                value={virtualClipboard}
                                className="w-full h-16 bg-slate-900 text-slate-300 font-mono text-xs p-2 rounded border border-slate-800 focus:outline-none resize-none"
                                placeholder="ç­‰å¾…å¤åˆ¶æ“ä½œ..."
                            ></textarea>
                        </div>

                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
